<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Payslip</title>
  <style>
    body { font-family: Arial, sans-serif; font-size: 12px; }
    h2 { text-transform: uppercase; font-weight: bold; letter-spacing: 2px; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    .netpay { font-size: 16px; font-weight: bold; color: #2c3e50; text-align: right; margin-top: 20px; }
    .thankyou { text-align: center; font-style: italic; margin-top: 30px; color: #555; }
  </style>
</head>
<body>

  <!-- Header with logo and company name -->
  <div style="text-align:center;">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" style="height:150px;">
    <h2>MAXIMATIC SECURITY SERVICES</h2>
  </div>

  <div style="text-align:center; margin-bottom:20px;">
    Payroll period: {{ p.period_start }} to {{ p.period_end }}<br>
    Payslip for {{ p.employee.first_name }} {{ p.employee.last_name }}
  </div>

  <!-- Earnings and Deductions -->
  <table>
    <tr><th>Basic Pay</th><td>{{ "%.2f"|format(p.basic_pay + p.overtime_pay + p.allowances + (p.hours_worked * p.rate_per_hour)) }}</td></tr>
    <tr><th>Overtime Pay</th><td>{{ "%.2f"|format(p.overtime_pay) }}</td></tr>
    <tr><th>Allowances</th><td>{{ "%.2f"|format(p.allowances) }}</td></tr>
    <tr><th>NIS (5.6%)</th><td>{{ "%.2f"|format(p.nis) }}</td></tr>
    <tr><th>GRA Tax</th><td>{{ "%.2f"|format(p.tax) }}</td></tr>
    <tr><th>Other Deductions</th><td>{{ "%.2f"|format(p.other_deductions) }}</td></tr>
    <tr><th>Net Pay</th><td>{{ "%.2f"|format(p.net_pay) }}</td></tr>
  </table>

  <!-- Net Pay Highlight -->
  <div class="netpay">
    Net Pay: {{ "%.2f"|format(p.net_pay) }}
  </div>

  <!-- Year-to-Date Totals -->
  <h3 style="margin-top:30px;">Year-to-Date Totals</h3>
  <table>
    <tr><th>Basic Pay</th><td>{{ "%.2f"|format(ytd.basic_pay) }}</td></tr>
    <tr><th>Overtime Pay</th><td>{{ "%.2f"|format(ytd.overtime_pay) }}</td></tr>
    <tr><th>Allowances</th><td>{{ "%.2f"|format(ytd.allowances) }}</td></tr>
    <tr><th>NIS</th><td>{{ "%.2f"|format(ytd.nis) }}</td></tr>
    <tr><th>Tax</th><td>{{ "%.2f"|format(ytd.tax) }}</td></tr>
    <tr><th>Other Deductions</th><td>{{ "%.2f"|format(ytd.other_deductions) }}</td></tr>
    <tr><th>Net Pay</th><td>{{ "%.2f"|format(ytd.net_pay) }}</td></tr>
  </table>

  <!-- Thank You Message -->
  <p class="thankyou">
    Thank you for being an Employee of Maximatic Security Services.
  </p>

</body>
</html>

